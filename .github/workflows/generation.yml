on:
  workflow_dispatch:
    inputs:
      readme:
        description: ''
        default: mediaservices
        required: false
      suffix:
        description: ''
        required: false

jobs:
  build:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-python@v2
        with:
            python-version: 3.x
      - uses: actions/setup-node@v2-beta
        with:
            node-version: '14'
      - uses: actions/setup-java@v1
        with:
            java-version: 1.11
      - run: |
          npm install -g autorest
          pip3 install --upgrade PyYAML
      - run: |
          java -version
          ./eng/mgmt/automation/generate.py --readme "$README" --suffix "$SUFFIX" --compile
        env:
          README: ${{ github.event.inputs.readme }}
          SUFFIX: ${{ github.event.inputs.suffix }}